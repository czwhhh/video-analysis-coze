"use strict";(()=>{var e={};e.id=124,e.ids=[124],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7790:e=>{e.exports=require("assert")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},4175:e=>{e.exports=require("tty")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},1568:e=>{e.exports=require("zlib")},5877:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var t={};s.r(t),s.d(t,{POST:()=>p});var o=s(9303),a=s(8716),u=s(3131),n=s(9712);async function i(e){try{console.log("正在解析视频链接:",e);let r=e.trim();if(!r)return{success:!1,message:"视频链接为空"};let s=process.env.COZE_API_KEY||"pat_ur38mP94BhFewhCa6gVMa3fOfacxnuQLPxdTQ3O4zDN9XK5v3pLyBbJur4O0hcPH",t=process.env.COZE_WORKFLOW_ID||"7485642000294756378",o=await n.Z.post("https://api.coze.cn/v1/workflow/run",{parameters:{input:r},workflow_id:t},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});console.log("API响应:",o.data);let a=o.data;if(0!==a.code)return console.error("API返回错误:",a),{success:!1,message:a.msg||"解析失败"};try{let e=JSON.parse(a.data);if(console.log("解析后的数据:",e),e&&e.output&&e.output.length>0)return{success:!0,videoUrl:e.output[0].url};return{success:!1,message:"无法获取视频链接"}}catch(e){return console.error("数据解析错误:",e,"原始数据:",a.data),{success:!1,message:"数据解析错误"}}}catch(e){return console.error("视频解析请求错误:",e),{success:!1,message:"网络请求错误"}}}async function p(e){try{let{url:r}=await e.json();if(!r)return Response.json({success:!1,message:"请提供视频链接"},{status:400});let s=await i(r);if(!s.success)return Response.json({success:!1,message:s.message||"视频解析失败"},{status:400});return Response.json({success:!0,message:"解析成功",data:{url:s.videoUrl}})}catch(e){return console.error("视频解析错误:",e.message),Response.json({success:!1,message:"解析过程中发生错误"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/video/analyze/route",pathname:"/api/video/analyze",filename:"route",bundlePath:"app/api/video/analyze/route"},resolvedPagePath:"E:\\Program Files\\Code\\Cursor\\video-analysis-coze\\app\\api\\video\\analyze\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=c,g="/api/video/analyze/route";function x(){return(0,u.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,165],()=>s(5877));module.exports=t})();