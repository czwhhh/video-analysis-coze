"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/video/download/route";
exports.ids = ["app/api/video/download/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fdownload%2Froute&page=%2Fapi%2Fvideo%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fdownload%2Froute.ts&appDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fdownload%2Froute&page=%2Fapi%2Fvideo%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fdownload%2Froute.ts&appDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Program_Files_Code_Cursor_video_analysis_coze_app_api_video_download_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/video/download/route.ts */ \"(rsc)/./app/api/video/download/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/video/download/route\",\n        pathname: \"/api/video/download\",\n        filename: \"route\",\n        bundlePath: \"app/api/video/download/route\"\n    },\n    resolvedPagePath: \"E:\\\\Program Files\\\\Code\\\\Cursor\\\\video-analysis-coze\\\\app\\\\api\\\\video\\\\download\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Program_Files_Code_Cursor_video_analysis_coze_app_api_video_download_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/video/download/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2aWRlbyUyRmRvd25sb2FkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2aWRlbyUyRmRvd25sb2FkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdmlkZW8lMkZkb3dubG9hZCUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUHJvZ3JhbSUyMEZpbGVzJTVDQ29kZSU1Q0N1cnNvciU1Q3ZpZGVvLWFuYWx5c2lzLWNvemUlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUUlM0ElNUNQcm9ncmFtJTIwRmlsZXMlNUNDb2RlJTVDQ3Vyc29yJTVDdmlkZW8tYW5hbHlzaXMtY296ZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDeUM7QUFDdEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWRlby1hbmFseXNpcy1jb3plLz9hODQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkU6XFxcXFByb2dyYW0gRmlsZXNcXFxcQ29kZVxcXFxDdXJzb3JcXFxcdmlkZW8tYW5hbHlzaXMtY296ZVxcXFxhcHBcXFxcYXBpXFxcXHZpZGVvXFxcXGRvd25sb2FkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92aWRlby9kb3dubG9hZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZpZGVvL2Rvd25sb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92aWRlby9kb3dubG9hZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkU6XFxcXFByb2dyYW0gRmlsZXNcXFxcQ29kZVxcXFxDdXJzb3JcXFxcdmlkZW8tYW5hbHlzaXMtY296ZVxcXFxhcHBcXFxcYXBpXFxcXHZpZGVvXFxcXGRvd25sb2FkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92aWRlby9kb3dubG9hZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fdownload%2Froute&page=%2Fapi%2Fvideo%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fdownload%2Froute.ts&appDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/video/download/route.ts":
/*!*****************************************!*\
  !*** ./app/api/video/download/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\n\nasync function GET(request) {\n    try {\n        // 从URL参数中获取视频URL\n        const url = new URL(request.url).searchParams.get(\"url\");\n        if (!url) {\n            console.error(\"未提供视频URL\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"未提供视频URL\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"开始下载视频:\", url);\n        // 检查视频URL是否包含允许下载的域\n        // 这些域已知是可以直接下载的\n        const allowedDomains = [\n            \"interactive-examples.mdn.mozilla.net\",\n            \"media.w3.org\",\n            \"techslides.com\"\n        ];\n        const videoUrl = new URL(url);\n        const hostname = videoUrl.hostname;\n        const isAllowedDomain = allowedDomains.some((domain)=>hostname.includes(domain));\n        console.log(\"视频主机名:\", hostname, \"是否允许域:\", isAllowedDomain);\n        // 默认Headers，使用Record<string, string>类型避免索引错误\n        const headers = {\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36\",\n            \"Accept\": \"*/*\",\n            \"Accept-Language\": \"zh-CN,zh;q=0.9,en;q=0.8\",\n            \"Cache-Control\": \"no-cache\",\n            \"Pragma\": \"no-cache\"\n        };\n        // 为允许域添加Referer和Origin\n        if (isAllowedDomain) {\n            headers[\"Referer\"] = url;\n            headers[\"Origin\"] = videoUrl.origin;\n        }\n        console.log(\"使用以下头部尝试下载:\", headers);\n        try {\n            // 尝试通过fetch下载\n            const response = await fetch(url, {\n                headers: headers,\n                cache: \"no-cache\",\n                next: {\n                    revalidate: 0\n                }\n            });\n            if (!response.ok) {\n                console.error(\"视频下载失败，状态码:\", response.status);\n                throw new Error(`下载失败，状态码: ${response.status}`);\n            }\n            // 获取视频内容类型\n            const contentType = response.headers.get(\"content-type\") || \"video/mp4\";\n            console.log(\"下载成功，内容类型:\", contentType);\n            // 将视频传输给客户端\n            return new Response(response.body, {\n                status: 200,\n                headers: {\n                    \"Content-Type\": contentType,\n                    \"Content-Disposition\": `attachment; filename=\"video.mp4\"`,\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    \"Cache-Control\": \"no-cache\"\n                }\n            });\n        } catch (error) {\n            console.error(\"fetch下载失败:\", error);\n            // 尝试通过axios作为备用\n            try {\n                console.log(\"尝试使用axios下载...\");\n                const axiosResponse = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(url, {\n                    responseType: \"arraybuffer\",\n                    headers: headers,\n                    timeout: 30000,\n                    maxRedirects: 5\n                });\n                const data = axiosResponse.data;\n                const contentType = axiosResponse.headers[\"content-type\"] || \"video/mp4\";\n                console.log(\"axios下载成功，内容类型:\", contentType);\n                return new Response(data, {\n                    status: 200,\n                    headers: {\n                        \"Content-Type\": contentType,\n                        \"Content-Disposition\": `attachment; filename=\"video.mp4\"`,\n                        \"Access-Control-Allow-Origin\": \"*\",\n                        \"Cache-Control\": \"no-cache\"\n                    }\n                });\n            } catch (axiosError) {\n                console.error(\"axios下载也失败:\", axiosError);\n                throw axiosError;\n            }\n        }\n    } catch (error) {\n        console.error(\"视频下载最终失败:\", error.message);\n        let errorMessage = \"视频下载失败\";\n        let statusCode = 500;\n        if (error.response) {\n            statusCode = error.response.status;\n            if (statusCode === 403) {\n                errorMessage = \"该视频被保护，无法直接下载。请尝试在线观看。\";\n            } else if (statusCode === 404) {\n                errorMessage = \"找不到视频资源，请检查链接是否有效。\";\n            } else {\n                errorMessage = `服务器返回错误: ${statusCode}`;\n            }\n        } else if (error.code === \"ECONNABORTED\") {\n            errorMessage = \"视频下载超时，请稍后再试。\";\n            statusCode = 504;\n        } else {\n            errorMessage = error.message || \"下载过程中发生未知错误\";\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: errorMessage\n        }, {\n            status: statusCode\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFFLE9BQU9RLFlBQVk7Z0JBQ25CL0IsUUFBUUMsS0FBSyxDQUFDLGVBQWU4QjtnQkFDN0IsTUFBTUE7WUFDUjtRQUNGO0lBQ0YsRUFBRSxPQUFPOUIsT0FBWTtRQUNuQkQsUUFBUUMsS0FBSyxDQUFDLGFBQWFBLE1BQU1HLE9BQU87UUFFeEMsSUFBSTRCLGVBQWU7UUFDbkIsSUFBSUMsYUFBYTtRQUVqQixJQUFJaEMsTUFBTWUsUUFBUSxFQUFFO1lBQ2xCaUIsYUFBYWhDLE1BQU1lLFFBQVEsQ0FBQ1gsTUFBTTtZQUVsQyxJQUFJNEIsZUFBZSxLQUFLO2dCQUN0QkQsZUFBZTtZQUNqQixPQUFPLElBQUlDLGVBQWUsS0FBSztnQkFDN0JELGVBQWU7WUFDakIsT0FBTztnQkFDTEEsZUFBZSxDQUFDLFNBQVMsRUFBRUMsV0FBVyxDQUFDO1lBQ3pDO1FBQ0YsT0FBTyxJQUFJaEMsTUFBTWlDLElBQUksS0FBSyxnQkFBZ0I7WUFDeENGLGVBQWU7WUFDZkMsYUFBYTtRQUNmLE9BQU87WUFDTEQsZUFBZS9CLE1BQU1HLE9BQU8sSUFBSTtRQUNsQztRQUVBLE9BQU9aLHFEQUFZQSxDQUFDVSxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsU0FBUzRCO1FBQWEsR0FDeEM7WUFBRTNCLFFBQVE0QjtRQUFXO0lBRXpCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWRlby1hbmFseXNpcy1jb3plLy4vYXBwL2FwaS92aWRlby9kb3dubG9hZC9yb3V0ZS50cz82N2IzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIOS7jlVSTOWPguaVsOS4reiOt+WPluinhumikVVSTFxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpLnNlYXJjaFBhcmFtcy5nZXQoJ3VybCcpO1xuICAgIFxuICAgIGlmICghdXJsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmnKrmj5Dkvpvop4bpopFVUkwnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ+acquaPkOS+m+inhumikVVSTCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn5byA5aeL5LiL6L296KeG6aKROicsIHVybCk7XG4gICAgXG4gICAgLy8g5qOA5p+l6KeG6aKRVVJM5piv5ZCm5YyF5ZCr5YWB6K645LiL6L2955qE5Z+fXG4gICAgLy8g6L+Z5Lqb5Z+f5bey55+l5piv5Y+v5Lul55u05o6l5LiL6L2955qEXG4gICAgY29uc3QgYWxsb3dlZERvbWFpbnMgPSBbXG4gICAgICAnaW50ZXJhY3RpdmUtZXhhbXBsZXMubWRuLm1vemlsbGEubmV0JyxcbiAgICAgICdtZWRpYS53My5vcmcnLFxuICAgICAgJ3RlY2hzbGlkZXMuY29tJ1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgdmlkZW9VcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgY29uc3QgaG9zdG5hbWUgPSB2aWRlb1VybC5ob3N0bmFtZTtcbiAgICBjb25zdCBpc0FsbG93ZWREb21haW4gPSBhbGxvd2VkRG9tYWlucy5zb21lKGRvbWFpbiA9PiBob3N0bmFtZS5pbmNsdWRlcyhkb21haW4pKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn6KeG6aKR5Li75py65ZCNOicsIGhvc3RuYW1lLCAn5piv5ZCm5YWB6K645Z+fOicsIGlzQWxsb3dlZERvbWFpbik7XG4gICAgXG4gICAgLy8g6buY6K6kSGVhZGVyc++8jOS9v+eUqFJlY29yZDxzdHJpbmcsIHN0cmluZz7nsbvlnovpgb/lhY3ntKLlvJXplJnor69cbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzExMS4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcbiAgICAgICdBY2NlcHQnOiAnKi8qJyxcbiAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnemgtQ04semg7cT0wLjksZW47cT0wLjgnLFxuICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLFxuICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsXG4gICAgfTtcbiAgICBcbiAgICAvLyDkuLrlhYHorrjln5/mt7vliqBSZWZlcmVy5ZKMT3JpZ2luXG4gICAgaWYgKGlzQWxsb3dlZERvbWFpbikge1xuICAgICAgaGVhZGVyc1snUmVmZXJlciddID0gdXJsO1xuICAgICAgaGVhZGVyc1snT3JpZ2luJ10gPSB2aWRlb1VybC5vcmlnaW47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfkvb/nlKjku6XkuIvlpLTpg6jlsJ3or5XkuIvovb06JywgaGVhZGVycyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIOWwneivlemAmui/h2ZldGNo5LiL6L29XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcbiAgICAgICAgbmV4dDogeyByZXZhbGlkYXRlOiAwIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+inhumikeS4i+i9veWksei0pe+8jOeKtuaAgeeggTonLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOS4i+i9veWksei0pe+8jOeKtuaAgeeggTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOiOt+WPluinhumikeWGheWuueexu+Wei1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJ3ZpZGVvL21wNCc7XG4gICAgICBjb25zb2xlLmxvZygn5LiL6L295oiQ5Yqf77yM5YaF5a6557G75Z6LOicsIGNvbnRlbnRUeXBlKTtcbiAgICAgIFxuICAgICAgLy8g5bCG6KeG6aKR5Lyg6L6T57uZ5a6i5oi356uvXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHJlc3BvbnNlLmJvZHksIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogY29udGVudFR5cGUsXG4gICAgICAgICAgJ0NvbnRlbnQtRGlzcG9zaXRpb24nOiBgYXR0YWNobWVudDsgZmlsZW5hbWU9XCJ2aWRlby5tcDRcImAsXG4gICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZldGNo5LiL6L295aSx6LSlOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8g5bCd6K+V6YCa6L+HYXhpb3PkvZzkuLrlpIfnlKhcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCflsJ3or5Xkvb/nlKhheGlvc+S4i+i9vS4uLicpO1xuICAgICAgICBjb25zdCBheGlvc1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KHVybCwge1xuICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIG1heFJlZGlyZWN0czogNVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRhdGEgPSBheGlvc1Jlc3BvbnNlLmRhdGE7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gYXhpb3NSZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSB8fCAndmlkZW8vbXA0JztcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdheGlvc+S4i+i9veaIkOWKn++8jOWGheWuueexu+WeizonLCBjb250ZW50VHlwZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGRhdGEsIHtcbiAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogY29udGVudFR5cGUsXG4gICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbic6IGBhdHRhY2htZW50OyBmaWxlbmFtZT1cInZpZGVvLm1wNFwiYCxcbiAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoYXhpb3NFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdheGlvc+S4i+i9veS5n+Wksei0pTonLCBheGlvc0Vycm9yKTtcbiAgICAgICAgdGhyb3cgYXhpb3NFcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCfop4bpopHkuIvovb3mnIDnu4jlpLHotKU6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgXG4gICAgbGV0IGVycm9yTWVzc2FnZSA9ICfop4bpopHkuIvovb3lpLHotKUnO1xuICAgIGxldCBzdGF0dXNDb2RlID0gNTAwO1xuICAgIFxuICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgc3RhdHVzQ29kZSA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cztcbiAgICAgIFxuICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSAn6K+l6KeG6aKR6KKr5L+d5oqk77yM5peg5rOV55u05o6l5LiL6L2944CC6K+35bCd6K+V5Zyo57q/6KeC55yL44CCJztcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDA0KSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICfmib7kuI3liLDop4bpopHotYTmupDvvIzor7fmo4Dmn6Xpk77mjqXmmK/lkKbmnInmlYjjgIInO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gYOacjeWKoeWZqOi/lOWbnumUmeivrzogJHtzdGF0dXNDb2RlfWA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5BQk9SVEVEJykge1xuICAgICAgZXJyb3JNZXNzYWdlID0gJ+inhumikeS4i+i9vei2heaXtu+8jOivt+eojeWQjuWGjeivleOAgic7XG4gICAgICBzdGF0dXNDb2RlID0gNTA0O1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8ICfkuIvovb3ov4fnqIvkuK3lj5HnlJ/mnKrnn6XplJnor68nO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiBzdGF0dXNDb2RlIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJheGlvcyIsIkdFVCIsInJlcXVlc3QiLCJ1cmwiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJjb25zb2xlIiwiZXJyb3IiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJsb2ciLCJhbGxvd2VkRG9tYWlucyIsInZpZGVvVXJsIiwiaG9zdG5hbWUiLCJpc0FsbG93ZWREb21haW4iLCJzb21lIiwiZG9tYWluIiwiaW5jbHVkZXMiLCJoZWFkZXJzIiwib3JpZ2luIiwicmVzcG9uc2UiLCJmZXRjaCIsImNhY2hlIiwibmV4dCIsInJldmFsaWRhdGUiLCJvayIsIkVycm9yIiwiY29udGVudFR5cGUiLCJSZXNwb25zZSIsImJvZHkiLCJheGlvc1Jlc3BvbnNlIiwicmVzcG9uc2VUeXBlIiwidGltZW91dCIsIm1heFJlZGlyZWN0cyIsImRhdGEiLCJheGlvc0Vycm9yIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzQ29kZSIsImNvZGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/video/download/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/get-intrinsic","vendor-chunks/form-data","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fdownload%2Froute&page=%2Fapi%2Fvideo%2Fdownload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fdownload%2Froute.ts&appDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProgram%20Files%5CCode%5CCursor%5Cvideo-analysis-coze&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();